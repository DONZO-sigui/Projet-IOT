<%- include('partials/header') %>
<%- include('partials/navbar') %>

<header class="bg-primary text-white py-5">
  <div class="container text-center py-5">
    <h1 class="display-3 fw-bold">BIENVENUES DANS CET ESPACE DE TRAVAIL !</h1>
    <p class="lead fs-3">Syst√®me IoT pour la surveillance de la qualit√© de l'eau et la s√©curit√© des bateaux de p√™che</p>
    
    <div class="mt-5 d-flex justify-content-center gap-4 flex-wrap">
      <!-- Bouton Cahier des charges -->
      <a href="/documents/Proj IOT GRP10.docx" target="_blank" class="btn btn-light btn-lg px-5 py-3 shadow-lg fw-bold" style="font-size: 1.2rem;">
        <i class="bi bi-file-earmark-text-fill fs-3 me-3"></i>
        T√©l√©charger le cahier des charges complet
      </a>

      <!-- Bouton Assistant IA -->
      <button type="button" class="btn btn-warning btn-lg px-5 py-3 shadow-lg fw-bold" data-bs-toggle="modal" data-bs-target="#iaModal" style="font-size: 1.2rem;">
        <i class="bi bi-robot fs-3 me-3"></i>
        Assistant IA P√™che
      </button>
    </div>
  </div>
</header>

<div class="container my-5">
  <div class="row g-5 justify-content-center">

    <!-- Carte 1 : Qualit√© de l'eau (cliquable) -->
    <div class="col-lg-5">
      <div class="card h-100 border-0 shadow-lg rounded-4 clickable-card" data-bs-toggle="modal" data-bs-target="#modalQualiteEau">
        <div class="card-body text-center p-5">
          <i class="bi bi-droplet-fill text-primary display-1 mb-4"></i>
          <h3 class="fw-bold">Surveillance de la qualit√© de l'eau</h3>
          <p class="fs-5 text-muted">
            Mesure en temps r√©el : temp√©rature, pH, turbidit√©<br>
            Alertes automatiques en cas d'anomalie
          </p>
        </div>
      </div>
    </div>

    <!-- Carte 2 : S√©curit√© des p√™cheurs (cliquable) -->
    <div class="col-lg-5">
      <div class="card h-100 border-0 shadow-lg rounded-4 clickable-card" data-bs-toggle="modal" data-bs-target="#modalSecurite">
        <div class="card-body text-center p-5">
          <i class="bi bi-geo-alt-fill text-primary display-1 mb-4"></i>
          <h3 class="fw-bold">S√©curit√© des p√™cheurs</h3>
          <p class="fs-5 text-muted">
            Suivi GPS des bateaux<br>
            Alertes SOS et d√©rive automatique
          </p>
        </div>
      </div>
    </div>

  </div>
</div>

<!-- MODAL 1 : Explications qualit√© de l'eau -->
<div class="modal fade" id="modalQualiteEau" tabindex="-1" aria-labelledby="modalQualiteEauLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content shadow-lg">
      <div class="modal-header bg-primary text-white">
        <h5 class="modal-title fw-bold" id="modalQualiteEauLabel">
          <i class="bi bi-droplet-fill me-2"></i> Surveillance de la qualit√© de l'eau
        </h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body p-5">
        <h5 class="fw-bold text-primary mb-3"><i class="bi bi-activity me-2"></i> pH de l'eau</h5>
        <p>
          <strong>Valeur id√©ale :</strong> 6.5 √† 8.5<br>
          ‚Ä¢ < 6.5 : eau trop acide ‚Üí toxique pour les poissons<br>
          ‚Ä¢ > 8.5 : eau trop alcaline ‚Üí stress et maladies<br>
          Proj_iot alerte d√®s que le pH sort de cette plage.
        </p>

        <h5 class="fw-bold text-warning mt-4 mb-3"><i class="bi bi-thermometer-sun me-2"></i> Temp√©rature</h5>
        <p>
          <strong>Valeur id√©ale :</strong> 25 √† 30¬∞C<br>
          ‚Ä¢ > 30¬∞C : risque √©lev√© de mortalit√© (manque d'oxyg√®ne)<br>
          ‚Ä¢ < 24¬∞C : croissance ralentie des poissons<br>
          Proj_iot surveille en continu pour √©viter les chocs thermiques.
        </p>

        <h5 class="fw-bold text-info mt-4 mb-3"><i class="bi bi-cloud-haze2 me-2"></i> Turbidit√©</h5>
        <p>
          <strong>Valeur id√©ale :</strong> < 30 NTU<br>
          ‚Ä¢ > 30 NTU : eau trouble (s√©diments, pollution)<br>
          Impact : r√©duit la lumi√®re ‚Üí moins de photosynth√®se ‚Üí moins d'oxyg√®ne<br>
          Proj_iot d√©tecte la turbidit√© et envoie alerte pollution.
        </p>

        <div class="alert alert-success mt-4 text-center">
          <strong>Proj_iot prot√®ge les poissons en surveillant ces 3 param√®tres 24h/24</strong>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- MODAL 2 : Explications s√©curit√© p√™cheurs -->
<div class="modal fade" id="modalSecurite" tabindex="-1" aria-labelledby="modalSecuriteLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content shadow-lg">
      <div class="modal-header bg-primary text-white">
        <h5 class="modal-title fw-bold" id="modalSecuriteLabel">
          <i class="bi bi-geo-alt-fill me-2"></i> S√©curit√© des p√™cheurs
        </h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body p-5">
        <h5 class="fw-bold text-primary mb-3"><i class="bi bi-pin-map me-2"></i> Localisation GPS en temps r√©el</h5>
        <p>
          Proj_iot suit la position exacte du bateau √† tout moment.<br>
          Mise √† jour toutes les minutes via module GPS embarqu√©.
        </p>

        <h5 class="fw-bold text-warning mt-4 mb-3"><i class="bi bi-sign-stop me-2"></i> Zones de p√™che s√©curis√©es</h5>
        <p>
          Cercles virtuels autour du port et des zones autoris√©es.<br>
          Si le bateau sort de la zone ‚Üí <strong>alerte d√©rive automatique</strong> envoy√©e √† l'admin.
        </p>

        <h5 class="fw-bold text-danger mt-4 mb-3"><i class="bi bi-exclamation-triangle me-2"></i> Alerte SOS</h5>
        <p>
          Bouton d'urgence sur le dispositif embarqu√©.<br>
          Appui long ‚Üí envoi imm√©diat de la position GPS + message SOS aux autorit√©s et familles.
        </p>

        <div class="alert alert-danger mt-4 text-center">
          <strong>Proj_iot sauve des vies en mer</strong>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  .clickable-card {
    cursor: pointer;
    transition: all 0.3s ease;
  }
  .clickable-card:hover {
    transform: translateY(-10px);
    box-shadow: 0 15px 30px rgba(0,0,0,0.2) !important;
  }
</style>

<!-- MODAL ASSISTANT IA -->
<div class="modal fade" id="iaModal" tabindex="-1" aria-labelledby="iaModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable">
    <div class="modal-content shadow-lg">
      <div class="modal-header bg-primary text-white">
        <h5 class="modal-title fw-bold" id="iaModalLabel">
          <i class="bi bi-robot me-2"></i> Assistant IA - P√™che en Guin√©e
        </h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <p class="text-muted text-center mb-4 lead">
          Posez-moi n'importe quelle question sur la p√™che en Guin√©e : esp√®ces de poissons, maladies, milieu de vie, pollution, s√©curit√©, saisons...<br>
          Je vous donne des informations pr√©cises + des solutions pratiques !
        </p>

        <div class="input-group mb-4">
          <input type="text" id="ia-question" class="form-control form-control-lg" placeholder="Ex: Esp√®ces de poissons en Guin√©e ? Maladies courantes ? Solutions pollution ?" aria-label="Question IA">
          <button class="btn btn-primary btn-lg" type="button" onclick="askIA()">
            <i class="bi bi-send"></i> Envoyer
          </button>
        </div>

        <div id="ia-response" class="mt-4 p-4 bg-light rounded shadow-sm" style="min-height: 300px; display: none;">
          <p class="text-muted">En attente de votre question...</p>
        </div>
      </div>
      <div class="modal-footer">
        <small class="text-muted">IA sp√©cialis√©e p√™che durable en Guin√©e ‚Ä¢ Conseils pratiques et scientifiques</small>
      </div>
    </div>
  </div>
</div>

<script>
function askIA() {
  const question = document.getElementById('ia-question').value.trim().toLowerCase();
  const responseDiv = document.getElementById('ia-response');
  
  if (question === '') {
    responseDiv.innerHTML = '<p class="text-danger">Veuillez poser une question !</p>';
    responseDiv.style.display = 'block';
    return;
  }

  responseDiv.style.display = 'block';
  responseDiv.innerHTML = '<p class="text-info"><i class="bi bi-hourglass-split"></i> L\'IA analyse votre question...</p>';

  let answer = "";

  // ESP√àCES DE POISSONS
  if (question.includes("esp√®ces") || question.includes("poisson") || question.includes("types") || question.includes("quels poissons")) {
    answer = "üêü <strong>Principales esp√®ces p√™ch√©es en Guin√©e Conakry :</strong><br>" +
             "‚Ä¢ <strong>Barracuda</strong> (Sphyraena barracuda) ‚Äì tr√®s combatif<br>" +
             "‚Ä¢ <strong>Tarpon</strong> (Megalops atlanticus) ‚Äì jusqu'√† 100 kg<br>" +
             "‚Ä¢ <strong>Capitaine</strong> (Polydactylus quadrifilis)<br>" +
             "‚Ä¢ <strong>Carangue</strong>, <strong>Cobia</strong>, <strong>Carpe rouge</strong><br>" +
             "‚Ä¢ <strong>Thon</strong>, <strong>Sardinelle</strong>, <strong>Ethmalose</strong> (p√©lagiques)<br>" +
             "‚Ä¢ <strong>Tilapia</strong> et <strong>M√¢choiron</strong> en estuaires<br><br>" +
             "<strong>Solutions durables :</strong> Utiliser des maillages s√©lectifs pour pr√©server les juv√©niles et √©viter la surp√™che.";
  }

  // MALADIES DES POISSONS
  else if (question.includes("maladies") || question.includes("sant√©") || question.includes("parasite") || question.includes("malade")) {
    answer = "üöë <strong>Maladies courantes des poissons en Guin√©e :</strong><br>" +
             "‚Ä¢ Parasites (vers, protozoaires comme Ichthyophthirius)<br>" +
             "‚Ä¢ Infections bact√©riennes (Vibrio, Aeromonas)<br>" +
             "‚Ä¢ Infections fongiques (Saprolegnia)<br>" +
             "‚Ä¢ Stress li√© √† pollution ou turbidit√© haute<br><br>" +
             "<strong>Solutions :</strong><br>" +
             "‚Ä¢ Proj_iot d√©tecte pollution pr√©coce (turbidit√© >30 NTU ou pH anormal)<br>" +
             "‚Ä¢ √âviter zones pollu√©es<br>" +
             "‚Ä¢ Bonne hygi√®ne en aquaculture<br>" +
             "‚Ä¢ Quarantaine pour nouveaux poissons";
  }

  // MILIEU DE VIE
  else if (question.includes("milieu") || question.includes("habitat") || question.includes("mangrove") || question.includes("estuaire")) {
    answer = "üåø <strong>Milieu de vie des poissons c√¥tiers en Guin√©e :</strong><br>" +
             "‚Ä¢ Mangroves et estuaires : nurseries essentielles pour juv√©niles<br>" +
             "‚Ä¢ Eaux saum√¢tres riches en nutriments<br>" +
             "‚Ä¢ Plateau continental (eaux peu profondes)<br><br>" +
             "<strong>Solutions face √† la d√©gradation :</strong><br>" +
             "‚Ä¢ Prot√©ger les mangroves (pi√®gent s√©diments, abritent poissons)<br>" +
             "‚Ä¢ Proj_iot surveille qualit√© eau dans ces zones sensibles<br>" +
             "‚Ä¢ Restauration des √©cosyst√®mes c√¥tiers";
  }

  // POLLUTION
  else if (question.includes("pollution") || question.includes("eau") || question.includes("qualit√©")) {
    answer = "üö® <strong>Pollution de l'eau en Guin√©e :</strong><br>" +
             "‚Ä¢ D√©chets plastiques, rejets industriels, ruissellement saison pluie<br>" +
             "‚Ä¢ Impact : pH bas, turbidit√© haute, mortalit√© poissons<br><br>" +
             "<strong>Solutions :</strong><br>" +
             "‚Ä¢ Proj_iot alerte en temps r√©el (pH, temp√©rature, turbidit√©)<br>" +
             "‚Ä¢ R√©duire d√©chets √† la source<br>" +
             "‚Ä¢ Cr√©er zones marines prot√©g√©es<br>" +
             "‚Ä¢ Sensibilisation des communaut√©s";
  }

  // S√âCURIT√â
  else if (question.includes("s√©curit√©") || question.includes("bateau") || question.includes("p√™cheur")) {
    answer = "üÜò <strong>S√©curit√© des p√™cheurs :</strong><br>" +
             "‚Ä¢ Risques : d√©rive, temp√™tes, piraterie (golfe de Guin√©e)<br><br>" +
             "<strong>Solutions :</strong><br>" +
             "‚Ä¢ Proj_iot suit bateaux GPS + alerte SOS<br>" +
             "‚Ä¢ Gilet de sauvetage obligatoire<br>" +
             "‚Ä¢ Pr√©vision m√©t√©o avant sortie<br>" +
             "‚Ä¢ Patrouilles c√¥ti√®res";
  }

  // SAISONS
  else if (question.includes("saison") || question.includes("pluie") || question.includes("s√®che")) {
    answer = "üìÖ <strong>Saisons et p√™che en Guin√©e :</strong><br>" +
             "‚Ä¢ Saison s√®che (nov-avril) : eau claire, excellente qualit√©, meilleure p√™che<br>" +
             "‚Ä¢ Saison des pluies (mai-oct) : turbidit√© haute, pollution accrue, risques sant√©<br><br>" +
             "<strong>Solutions :</strong><br>" +
             "‚Ä¢ Proj_iot adapte alertes selon saison<br>" +
             "‚Ä¢ R√©duire effort p√™che en saison pluie<br>" +
             "‚Ä¢ Diversifier activit√©s (aquaculture)";
  }

  // R√âPONSE PAR D√âFAUT
  else {
    answer = "ü§ñ <strong>Je suis l'Assistant IA sp√©cialis√© en p√™che en Guin√©e.</strong><br>" +
             "Je peux vous aider sur :<br>" +
             "‚Ä¢ Esp√®ces de poissons<br>" +
             "‚Ä¢ Maladies et sant√©<br>" +
             "‚Ä¢ Milieu de vie (mangroves, estuaires)<br>" +
             "‚Ä¢ Pollution et qualit√© de l'eau<br>" +
             "‚Ä¢ S√©curit√© des p√™cheurs<br>" +
             "‚Ä¢ Impact des saisons<br><br>" +
             "Posez-moi une question pr√©cise pour une r√©ponse d√©taill√©e + solutions !";
  }

  setTimeout(() => {
    responseDiv.innerHTML = `<div class="fw-bold text-primary mb-3 fs-5">R√©ponse IA :</div><div>${answer}</div>`;
  }, 1200);
}
</script>

<%- include('partials/footer') %>